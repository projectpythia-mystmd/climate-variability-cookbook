{"version":2,"kind":"Notebook","sha256":"f66bf783c3059623b2ba57d6c6bf26f426b24a915d4fa97b109cc0a9541f1b7a","slug":"notebooks.cesm2-lens2-aws","location":"/notebooks/CESM2_LENS2_AWS.ipynb","dependencies":[],"frontmatter":{"title":"CESM2 LENS2 on AWS","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"authors":[{"nameParsed":{"literal":"Project Pythia Community","given":"Project Pythia","family":"Community"},"name":"Project Pythia Community","url":"https://projectpythia.org/","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true},"code":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true}},"github":"https://github.com/projectpythia/climate-variability-cookbook","copyright":"2024","numbering":{"title":{"offset":1}},"edit_url":"https://github.com/projectpythia/climate-variability-cookbook/blob/main/notebooks/CESM2_LENS2_AWS.ipynb","exports":[{"format":"ipynb","filename":"CESM2_LENS2_AWS.ipynb","url":"/climate-variability-cookbook/build/CESM2_LENS2_AWS-65113d447b18c8d51fd644c41289c2ac.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Display output of plots directly in Notebook\n%matplotlib inline\nimport warnings\nwarnings.filterwarnings(\"ignore\")\n\nimport intake\nimport numpy as np\nimport pandas as pd\nimport xarray as xr","key":"rZgoo129Xh"},{"type":"output","id":"svYjr0wKhU0lIpdVUByMS","data":[],"key":"yPeGALBsxr"}],"key":"WlwreeNACj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog = intake.open_esm_datastore(\n    'https://raw.githubusercontent.com/NCAR/cesm2-le-aws/main/intake-catalogs/aws-cesm2-le.json'\n)\ncatalog","key":"PdBvFbrrC1"},{"type":"output","id":"i7KiXy80-aoQStbOFOigW","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"<p><strong>aws-cesm2-le catalog with 40 dataset(s) from 322 asset(s)</strong>:</p> <div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unique</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>variable</th>\n      <td>53</td>\n    </tr>\n    <tr>\n      <th>long_name</th>\n      <td>51</td>\n    </tr>\n    <tr>\n      <th>component</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>experiment</th>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>forcing_variant</th>\n      <td>2</td>\n    </tr>\n    <tr>\n      <th>frequency</th>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>vertical_levels</th>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>spatial_domain</th>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>units</th>\n      <td>20</td>\n    </tr>\n    <tr>\n      <th>start_time</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>end_time</th>\n      <td>7</td>\n    </tr>\n    <tr>\n      <th>path</th>\n      <td>313</td>\n    </tr>\n    <tr>\n      <th>derived_variable</th>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"QERVBWsCbN"}],"key":"xACmiRNf1Y"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog.df.to_csv('namelist.csv')\n","key":"lAA0xj8FJv"},{"type":"output","id":"wqrw_cTegN4SJRFBE8Svl","data":[],"key":"BHRAtkfLFL"}],"key":"x5xwPKRsIB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog = intake.open_esm_datastore(\n    'https://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le.json'\n)\ncatalog","key":"JnGWYvctY1"},{"type":"output","id":"Vg7zUKL2PCDkZ0G-6kFZ3","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"<p><strong>aws-cesm1-le catalog with 56 dataset(s) from 442 asset(s)</strong>:</p> <div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unique</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>variable</th>\n      <td>78</td>\n    </tr>\n    <tr>\n      <th>long_name</th>\n      <td>75</td>\n    </tr>\n    <tr>\n      <th>component</th>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>experiment</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>frequency</th>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>vertical_levels</th>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>spatial_domain</th>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>units</th>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>start_time</th>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>end_time</th>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>path</th>\n      <td>427</td>\n    </tr>\n    <tr>\n      <th>derived_variable</th>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"gBzH45W4o8"}],"key":"SFXaWcoDBf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog = intake.open_esm_datastore(\n    'https://ncar-cesm-lens.s3-us-west-2.amazonaws.com/catalogs/aws-cesm1-le.json'\n)\ncatalog","key":"ul4VmJifzd"},{"type":"output","id":"oykYPyzqU-eo38FB_uTQD","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"<p><strong>aws-cesm1-le catalog with 56 dataset(s) from 442 asset(s)</strong>:</p> <div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unique</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>variable</th>\n      <td>78</td>\n    </tr>\n    <tr>\n      <th>long_name</th>\n      <td>75</td>\n    </tr>\n    <tr>\n      <th>component</th>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>experiment</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>frequency</th>\n      <td>6</td>\n    </tr>\n    <tr>\n      <th>vertical_levels</th>\n      <td>3</td>\n    </tr>\n    <tr>\n      <th>spatial_domain</th>\n      <td>5</td>\n    </tr>\n    <tr>\n      <th>units</th>\n      <td>25</td>\n    </tr>\n    <tr>\n      <th>start_time</th>\n      <td>12</td>\n    </tr>\n    <tr>\n      <th>end_time</th>\n      <td>13</td>\n    </tr>\n    <tr>\n      <th>path</th>\n      <td>427</td>\n    </tr>\n    <tr>\n      <th>derived_variable</th>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"VUzeR3zGVx"}],"key":"Yf00ddLqwA"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog.df.to_csv('namelistCESM1.csv')\n","key":"pE14LbfziK"},{"type":"output","id":"2q_bz-ZDC_MYSzGgi1_ML","data":[],"key":"SdI6Q5M7hQ"}],"key":"yLsuuH7PXa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"RSAC8e5f11"},{"type":"output","id":"H2jn9S9kSlI_OOk4SLw_2","data":[],"key":"pG5bfyI9oV"}],"key":"AzlO34rq0c"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport climdex.utils as cutils","key":"fS7i4bBPZh"},{"type":"output","id":"7YrutqYakmD7zaH5qvDf5","data":[],"key":"I6h6p4KPb3"}],"key":"nhcrx9Oc9s"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import climdex.precipitation as pdex","key":"T4SJp1sMmv"},{"type":"output","id":"gT8OJjYyHFBiKlm1cV31C","data":[],"key":"oEwBFHsWl8"}],"key":"smxwMNVlxb"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"indices = pdex.indices(time_dim='time')\n   # compute total monthly precipitation;\n   # your data should be daily or sub-daily time scale\n#ptot = indices.PRECC\nindices","key":"WC2SqYYZ83"},{"type":"output","id":"jXjrxiUdbavxrMGnerN6B","data":[{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"<climdex.precipitation.PrecipitationIndices at 0x7f3723d68050>","content_type":"text/plain"}}}],"key":"vwXg6MISgV"}],"key":"FJfD38Qx8C"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#indices = pdex.indices(time_dim='time')\n   # compute total monthly precipitation;\n   # your data should be daily or sub-daily time scale\n#ptot = indices.prcptot(data, period='1M')","key":"ocg8MaJvyJ"},{"type":"output","id":"P3G_G8V_HAk5AEC1e5d4E","data":[],"key":"BW0BxnNkT6"}],"key":"Z61eDn33Ro"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"","key":"XO0KFSinvc"},{"type":"output","id":"bNsxj9HgBgLi7XWtlkTEh","data":[],"key":"A0qN9DkfcM"}],"key":"v1xRMAVOWq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog_subset = catalog.search(variable='TREFHT', frequency='daily')\ncatalog_subset","key":"OFZDckxKLL"},{"type":"output","id":"JGGeWDZS5vIoLSYwlOxsU","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"<p><strong>aws-cesm1-le catalog with 4 dataset(s) from 4 asset(s)</strong>:</p> <div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>unique</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>variable</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>long_name</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>component</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>experiment</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>frequency</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>vertical_levels</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>spatial_domain</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>units</th>\n      <td>1</td>\n    </tr>\n    <tr>\n      <th>start_time</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>end_time</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>path</th>\n      <td>4</td>\n    </tr>\n    <tr>\n      <th>derived_variable</th>\n      <td>0</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"o6jgNKG7UY"}],"key":"uCGkjEeHv1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"catalog_subset.df\n","key":"Ya8UvYoxtN"},{"type":"output","id":"LjB4rksLcfQaJdHS3at0M","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/plain":{"content":"  variable                     long_name component experiment frequency  \\\n0   TREFHT  reference height temperature       atm        20C     daily   \n1   TREFHT  reference height temperature       atm       CTRL     daily   \n2   TREFHT  reference height temperature       atm       HIST     daily   \n3   TREFHT  reference height temperature       atm      RCP85     daily   \n\n   vertical_levels spatial_domain units           start_time  \\\n0              1.0         global     K  1920-01-01 12:00:00   \n1              1.0         global     K  0402-01-01 12:00:00   \n2              1.0         global     K  1850-01-01 12:00:00   \n3              1.0         global     K  2006-01-01 12:00:00   \n\n              end_time                                               path  \n0  2005-12-31 12:00:00  s3://ncar-cesm-lens/atm/daily/cesmLE-20C-TREFH...  \n1  2200-12-31 12:00:00  s3://ncar-cesm-lens/atm/daily/cesmLE-CTRL-TREF...  \n2  1919-12-31 12:00:00  s3://ncar-cesm-lens/atm/daily/cesmLE-HIST-TREF...  \n3  2100-12-31 12:00:00  s3://ncar-cesm-lens/atm/daily/cesmLE-RCP85-TRE...  ","content_type":"text/plain"},"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>variable</th>\n      <th>long_name</th>\n      <th>component</th>\n      <th>experiment</th>\n      <th>frequency</th>\n      <th>vertical_levels</th>\n      <th>spatial_domain</th>\n      <th>units</th>\n      <th>start_time</th>\n      <th>end_time</th>\n      <th>path</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>TREFHT</td>\n      <td>reference height temperature</td>\n      <td>atm</td>\n      <td>20C</td>\n      <td>daily</td>\n      <td>1.0</td>\n      <td>global</td>\n      <td>K</td>\n      <td>1920-01-01 12:00:00</td>\n      <td>2005-12-31 12:00:00</td>\n      <td>s3://ncar-cesm-lens/atm/daily/cesmLE-20C-TREFH...</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>TREFHT</td>\n      <td>reference height temperature</td>\n      <td>atm</td>\n      <td>CTRL</td>\n      <td>daily</td>\n      <td>1.0</td>\n      <td>global</td>\n      <td>K</td>\n      <td>0402-01-01 12:00:00</td>\n      <td>2200-12-31 12:00:00</td>\n      <td>s3://ncar-cesm-lens/atm/daily/cesmLE-CTRL-TREF...</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>TREFHT</td>\n      <td>reference height temperature</td>\n      <td>atm</td>\n      <td>HIST</td>\n      <td>daily</td>\n      <td>1.0</td>\n      <td>global</td>\n      <td>K</td>\n      <td>1850-01-01 12:00:00</td>\n      <td>1919-12-31 12:00:00</td>\n      <td>s3://ncar-cesm-lens/atm/daily/cesmLE-HIST-TREF...</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>TREFHT</td>\n      <td>reference height temperature</td>\n      <td>atm</td>\n      <td>RCP85</td>\n      <td>daily</td>\n      <td>1.0</td>\n      <td>global</td>\n      <td>K</td>\n      <td>2006-01-01 12:00:00</td>\n      <td>2100-12-31 12:00:00</td>\n      <td>s3://ncar-cesm-lens/atm/daily/cesmLE-RCP85-TRE...</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"}}}],"key":"iJerMJ0IhO"}],"key":"csFEhPLjgE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsets = catalog_subset.to_dataset_dict(storage_options={'anon':True})\n","key":"JtCAkppz0o"},{"type":"output","id":"AA6f6C-Z-b4pd_PROSFHb","data":[{"output_type":"stream","name":"stdout","text":"\n--> The keys in the returned dictionary of datasets are constructed as follows:\n\t'component.experiment.frequency'\n"},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"\n<style>\n    /* Turns off some styling */\n    progress {\n        /* gets rid of default border in Firefox and Opera. */\n        border: none;\n        /* Needs to be in here for Safari polyfill so background images work as expected. */\n        background-size: auto;\n    }\n    progress:not([value]), progress:not([value])::-webkit-progress-bar {\n        background: repeating-linear-gradient(45deg, #7e7e7e, #7e7e7e 10px, #5c5c5c 10px, #5c5c5c 20px);\n    }\n    .progress-bar-interrupted, .progress-bar-interrupted::-webkit-progress-bar {\n        background: #F44336;\n    }\n</style>\n","content_type":"text/html"}}},{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"},"text/html":{"content":"\n    <div>\n      <progress value='0' class='' max='4' style='width:300px; height:20px; vertical-align: middle;'></progress>\n      \n    </div>\n    ","content_type":"text/html"}}}],"key":"XjKhiWl6XM"}],"key":"RoWg0dzpV7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#indices = pdex.indices(time_dim='time')\n   # compute total monthly precipitation;\n   # your data should be daily or sub-daily time scale\n#ptot = indices.TREFHT(data, period='1M')","key":"iK8il6YgX7"},{"type":"output","id":"S9jxKNPxGrs1J96X36X6V","data":[],"key":"zApwbl4odh"}],"key":"QKvJGUKBa7"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsets","key":"w8bCCqTmK9"},{"type":"output","id":"F8KY3y_9uRdqg4vur1Ayb","data":[{"output_type":"execute_result","execution_count":15,"metadata":{},"data":{"text/plain":{"content":"{'atm.HIST.daily': <xarray.Dataset> Size: 6GB\n Dimensions:    (time: 25550, lat: 192, lon: 288, nbnd: 2)\n Coordinates:\n   * lat        (lat) float64 2kB -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0\n   * lon        (lon) float64 2kB 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8\n     member_id  int64 8B ...\n   * time       (time) object 204kB 1850-01-01 12:00:00 ... 1919-12-31 12:00:00\n     time_bnds  (time, nbnd) object 409kB dask.array<chunksize=(12775, 2), meta=np.ndarray>\n Dimensions without coordinates: nbnd\n Data variables:\n     TREFHT     (time, lat, lon) float32 6GB dask.array<chunksize=(576, 192, 288), meta=np.ndarray>\n Attributes: (12/25)\n     Conventions:                       CF-1.0\n     NCO:                               4.4.2\n     Version:                           $Name$\n     important_note:                    This data is part of the project 'Blin...\n     initial_file:                      b.e11.B20TRC5CNBDRD.f09_g16.001.cam.i....\n     logname:                           mudryk\n     ...                                ...\n     intake_esm_attrs:units:            K\n     intake_esm_attrs:start_time:       1850-01-01 12:00:00\n     intake_esm_attrs:end_time:         1919-12-31 12:00:00\n     intake_esm_attrs:path:             s3://ncar-cesm-lens/atm/daily/cesmLE-H...\n     intake_esm_attrs:_data_format_:    zarr\n     intake_esm_dataset_key:            atm.HIST.daily,\n 'atm.20C.daily': <xarray.Dataset> Size: 278GB\n Dimensions:    (member_id: 40, time: 31390, lat: 192, lon: 288, nbnd: 2)\n Coordinates:\n   * lat        (lat) float64 2kB -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0\n   * lon        (lon) float64 2kB 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8\n   * member_id  (member_id) int64 320B 1 2 3 4 5 6 7 ... 35 101 102 103 104 105\n   * time       (time) object 251kB 1920-01-01 12:00:00 ... 2005-12-31 12:00:00\n     time_bnds  (time, nbnd) object 502kB dask.array<chunksize=(15695, 2), meta=np.ndarray>\n Dimensions without coordinates: nbnd\n Data variables:\n     TREFHT     (member_id, time, lat, lon) float32 278GB dask.array<chunksize=(1, 576, 192, 288), meta=np.ndarray>\n Attributes: (12/25)\n     Conventions:                       CF-1.0\n     NCO:                               4.4.2\n     Version:                           $Name$\n     important_note:                    This data is part of the project 'Blin...\n     initial_file:                      b.e11.B20TRC5CNBDRD.f09_g16.001.cam.i....\n     logname:                           mudryk\n     ...                                ...\n     intake_esm_attrs:units:            K\n     intake_esm_attrs:start_time:       1920-01-01 12:00:00\n     intake_esm_attrs:end_time:         2005-12-31 12:00:00\n     intake_esm_attrs:path:             s3://ncar-cesm-lens/atm/daily/cesmLE-2...\n     intake_esm_attrs:_data_format_:    zarr\n     intake_esm_dataset_key:            atm.20C.daily,\n 'atm.RCP85.daily': <xarray.Dataset> Size: 307GB\n Dimensions:    (member_id: 40, time: 34675, lat: 192, lon: 288, nbnd: 2)\n Coordinates:\n   * lat        (lat) float64 2kB -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0\n   * lon        (lon) float64 2kB 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8\n   * member_id  (member_id) int64 320B 1 2 3 4 5 6 7 ... 35 101 102 103 104 105\n   * time       (time) object 277kB 2006-01-01 12:00:00 ... 2100-12-31 12:00:00\n     time_bnds  (time, nbnd) object 555kB dask.array<chunksize=(17338, 2), meta=np.ndarray>\n Dimensions without coordinates: nbnd\n Data variables:\n     TREFHT     (member_id, time, lat, lon) float32 307GB dask.array<chunksize=(1, 576, 192, 288), meta=np.ndarray>\n Attributes: (12/26)\n     Conventions:                       CF-1.0\n     NCO:                               4.4.2\n     Version:                           $Name$\n     host:                              tcs-f02n07\n     important_note:                    This data is part of the project 'Blin...\n     initial_file:                      b.e11.B20TRC5CNBDRD.f09_g16.105.cam.i....\n     ...                                ...\n     intake_esm_attrs:units:            K\n     intake_esm_attrs:start_time:       2006-01-01 12:00:00\n     intake_esm_attrs:end_time:         2100-12-31 12:00:00\n     intake_esm_attrs:path:             s3://ncar-cesm-lens/atm/daily/cesmLE-R...\n     intake_esm_attrs:_data_format_:    zarr\n     intake_esm_dataset_key:            atm.RCP85.daily,\n 'atm.CTRL.daily': <xarray.Dataset> Size: 145GB\n Dimensions:    (member_id: 1, time: 656634, lat: 192, lon: 288, nbnd: 2)\n Coordinates:\n   * lat        (lat) float64 2kB -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0\n   * lon        (lon) float64 2kB 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8\n   * member_id  (member_id) int64 8B 1\n   * time       (time) object 5MB 0402-01-01 12:00:00 ... 2200-12-31 12:00:00\n     time_bnds  (time, nbnd) object 11MB dask.array<chunksize=(82080, 1), meta=np.ndarray>\n Dimensions without coordinates: nbnd\n Data variables:\n     TREFHT     (member_id, time, lat, lon) float32 145GB dask.array<chunksize=(1, 576, 192, 288), meta=np.ndarray>\n Attributes: (12/25)\n     Conventions:                       CF-1.0\n     NCO:                               4.3.4\n     Version:                           $Name$\n     case:                              b.e11.B1850C5CN.f09_g16.005\n     initial_file:                      /glade/p/cesm/cseg//inputdata/atm/cam/...\n     logname:                           mai\n     ...                                ...\n     intake_esm_attrs:units:            K\n     intake_esm_attrs:start_time:       0402-01-01 12:00:00\n     intake_esm_attrs:end_time:         2200-12-31 12:00:00\n     intake_esm_attrs:path:             s3://ncar-cesm-lens/atm/daily/cesmLE-C...\n     intake_esm_attrs:_data_format_:    zarr\n     intake_esm_dataset_key:            atm.CTRL.daily}","content_type":"text/plain"}}}],"key":"eEn3IHyIaX"}],"key":"od5VSykT3B"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dsets.keys()\n","key":"DRpgyU1rUM"},{"type":"output","id":"RLs6FzKoBr4okp6K7tAqR","data":[{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/plain":{"content":"dict_keys(['atm.HIST.daily', 'atm.20C.daily', 'atm.RCP85.daily', 'atm.CTRL.daily'])","content_type":"text/plain"}}}],"key":"Bm63iMHBym"}],"key":"qttwZTFrAm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"historical = dsets['atm.HIST.daily']\n","key":"GJwHPwpa7y"},{"type":"output","id":"kPt_TG0sQBsw354Xr_nav","data":[],"key":"eResOnspEE"}],"key":"ThUg10Rqxf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"historical","key":"gkVEtjk6Wj"},{"type":"output","id":"juJq7Xyr5lRltN7dEPnIK","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/plain":{"content":"<xarray.Dataset> Size: 6GB\nDimensions:    (time: 25550, lat: 192, lon: 288, nbnd: 2)\nCoordinates:\n  * lat        (lat) float64 2kB -90.0 -89.06 -88.12 -87.17 ... 88.12 89.06 90.0\n  * lon        (lon) float64 2kB 0.0 1.25 2.5 3.75 ... 355.0 356.2 357.5 358.8\n    member_id  int64 8B ...\n  * time       (time) object 204kB 1850-01-01 12:00:00 ... 1919-12-31 12:00:00\n    time_bnds  (time, nbnd) object 409kB dask.array<chunksize=(12775, 2), meta=np.ndarray>\nDimensions without coordinates: nbnd\nData variables:\n    TREFHT     (time, lat, lon) float32 6GB dask.array<chunksize=(576, 192, 288), meta=np.ndarray>\nAttributes: (12/25)\n    Conventions:                       CF-1.0\n    NCO:                               4.4.2\n    Version:                           $Name$\n    important_note:                    This data is part of the project 'Blin...\n    initial_file:                      b.e11.B20TRC5CNBDRD.f09_g16.001.cam.i....\n    logname:                           mudryk\n    ...                                ...\n    intake_esm_attrs:units:            K\n    intake_esm_attrs:start_time:       1850-01-01 12:00:00\n    intake_esm_attrs:end_time:         1919-12-31 12:00:00\n    intake_esm_attrs:path:             s3://ncar-cesm-lens/atm/daily/cesmLE-H...\n    intake_esm_attrs:_data_format_:    zarr\n    intake_esm_dataset_key:            atm.HIST.daily","content_type":"text/plain"},"text/html":{"content_type":"text/html","hash":"d04a89937b4fe8917b4b012552f4add9","path":"/climate-variability-cookbook/build/d04a89937b4fe8917b4b012552f4add9.html"}}}],"key":"reqI4sG6pL"}],"key":"IRjScnFTra"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nplt.imshow(historical['TREFHT'].data[0], origin='lower')","key":"n5laWirfgq"},{"type":"output","id":"pY3R9lwvXyRm-6OcF49sp","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 1 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"ffe14226b6ed3a15f5e8593bcc2b602d","path":"/climate-variability-cookbook/build/ffe14226b6ed3a15f5e8593bcc2b602d.png"}}}],"key":"jrKfpGKUp9"}],"key":"Mba1nQcHWi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#plt.colorbar() # for the colorbar","key":"BkNv3VFiAV"},{"type":"output","id":"iUXFafn74ad8qoU3ozvKz","data":[],"key":"o5usZR6KG6"}],"key":"JMuSxjyADY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport numpy as np\n\n# Create sample data\ndata = np.random.rand(10, 10)\n\n# Create a plot with imshow\nplt.imshow(data, cmap='viridis')\nplt.colorbar() # Add a colorbar to the plot\nplt.title(\"Sample Data with Colorbar\")\nplt.show()\n","key":"oxtfR1zyEA"},{"type":"output","id":"LEnw2PGocfzjobYWJhNf7","data":[{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 640x480 with 2 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"a3222615098d3157bb253ea79f8fe4e4","path":"/climate-variability-cookbook/build/a3222615098d3157bb253ea79f8fe4e4.png"}}}],"key":"ddJmScalWZ"}],"key":"Kg4D7fezL7"}],"key":"VNVJtS3Rcm"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Climate Variability Cookbook","url":"/","group":"Climate Variability Cookbook"}}},"domain":"http://localhost:3000"}